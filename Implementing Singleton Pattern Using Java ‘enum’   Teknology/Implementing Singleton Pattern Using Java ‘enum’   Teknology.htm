<!-- saved from url=(0092)http://mishrabagish.wordpress.com/2012/07/03/implementing-singleton-pattern-using-java-enum/ -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Implementing Singleton Pattern Using Java ‘enum’ | Teknology</title>
			<style>
		#page {
			border-color: #f50f12;
		}
		#main-title #site-title a:hover,
		.post-title h1,
		.post-title h1 a,
		.post-extras .post-edit-link,
		.post-entry a,
		.post-entry .more-link:hover,
		#author-description a,
		.more-posts .page-title em,
		#more-posts-inner a:hover,
		#comments li a:hover,
		.comment-text p a,
		.comment-text .reply-link a:hover,
		#comments li.byuser .comment-author,
		#comments #respond h3,
		.sidebar-widget a:active,
		#calendar_wrap table td a,
		#nav-below a:active,
		#error404 a:hover,
		#menu .current-menu-item > a,
		#menu .current_page_item > a,
		#comment-nav-above a,
		#comment-nav-below a,
		.comment-text table a {
			color: #f50f12;
		}
	</style>
<body class="single single-post postid-299 single-format-standard two-column content-sidebar mp6 highlander-enabled highlander-light" style="">
<div id="page" class="hfeed">
		<div id="page-inner">
		<header id="branding" role="banner">
			
		</header><!-- #branding -->
		<div id="main" class="clear-fix">
	<div id="primary">
		<div id="content" class="clear-fix">

		
			<article id="post-299" class="post-299 post type-post status-publish format-standard hentry category-design-patterns category-java tag-enum tag-java tag-singleton tag-therad-safe">
	<header class="post-title">
				<h1>Implementing Singleton Pattern Using Java&nbsp;‘enum’</h1>					<p class="post-date">
			<strong>03</strong>
			<em>Tuesday</em>
			<span>Jul 2012</span>
		</p>
		<div class="post-info clear-fix">
		<p>
			Posted <span class="by-author"> by <span class="author vcard"><a class="url fn n" href="http://mishrabagish.wordpress.com/author/mishrabagish/" title="View all posts by mishrabagish" rel="author" sl-processed="1">mishrabagish</a></span></span> in <a href="http://mishrabagish.wordpress.com/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag" sl-processed="1">Design Patterns</a>, <a href="http://mishrabagish.wordpress.com/category/java/" title="View all posts in Java" rel="category tag" sl-processed="1">Java</a>		</p>
	</div><!-- end .post-info -->
	</header><!-- end .post-title -->

	<div class="post-content clear-fix">
			<div class="post-extras">
				<p><strong>Tags</strong></p><p><a href="http://mishrabagish.wordpress.com/tag/enum/" rel="tag" sl-processed="1">enum</a>, <a href="http://mishrabagish.wordpress.com/tag/java/" rel="tag" sl-processed="1">Java</a>, <a href="http://mishrabagish.wordpress.com/tag/singleton/" rel="tag" sl-processed="1">Singleton</a>, <a href="http://mishrabagish.wordpress.com/tag/therad-safe/" rel="tag" sl-processed="1">Therad safe</a></p>	</div><!-- end .post-extras -->

		<div class="post-entry">
			<p>Singleton pattern can be implemented in many ways. One of them is making constructor private and having another factory method to get instance. For example</p>
<pre width="100%">public class OldSingleton {

private static OldSingleton instance = null;
private OldSingleton()
{

}

public static OldSingleton getInstance()
{
  if(instance == null)
  instance = new OldSingleton();
  return instance;
}

}</pre>
<p>Or</p>
<pre width="100%">public class OldSingleton {

private static final OldSingleton instance = new OldSingleton();
private OldSingleton()
{

}

public static OldSingleton getInstance()
{
  return instance;
}

}</pre>
<p>Both has pros and cons, first one is not thread safe and the second creates the Singleton Object even before it is actually required. Some times we refine our first approach to make it thread safe, so we made getInstance() method syncronized</p>
<pre width="100%">public class OldSingleton {

private static OldSingleton instance = null;
private OldSingleton()
{

}

public static synchronized OldSingleton getInstance()
{
  if(instance == null)
  instance = new OldSingleton();
  return instance;
}

}</pre>
<p>Now due to this&nbsp;synchronized method applications&nbsp;performance&nbsp;degrades. Due to this sync method many threads has to wait to execute getInstance() method. So lets do one more refinement by fine grained locking or say using double check algo</p>
<pre width="100%">public class OldSingleton {

private static OldSingleton instance = null;
private OldSingleton()
{

}

public static OldSingleton getInstance()
{
 if(instance == null)
 {
  synchronized (OldSingleton.class) {
   if(instance == null)
    instance = new OldSingleton();
  }
}
return instance;
}

}</pre>
<p>And still people have found this double check algorithm broken in some case.</p>
<p>There is tons of argument about how to implement single and which one is better than other. But there is a SIMPLE and EFFECTIVE alternate as mention by Joshua Bloch in Effective Java (2nd ed, item no 3) is creation singleton using Java enum.</p>
<p>Lets see how simple is it</p>
<pre width="100%">public enum MySingleton {
     INSTANCE;

 public void sayHello()
 {
    System.out.println("Hello World");
 }

 public void sayBye()
 {
   System.out.println("Bye Bye");
 }

}</pre>
<p>And how we call it</p>
<pre width="100%">public class TestSingleton {

public static void main(String[] args) {
  MySingleton.INSTANCE.sayHello();
  MySingleton.INSTANCE.sayBye();

}

}</pre>
<p>Obviously the sayHello() and sayBye() is not thread safe( since we have not made them thread safe).</p>
<p>But as far as creation of singleton instance is concern ‘It is completely thread safe’. Also since enum is special type of java class and it can have methods and other variables. So we can add all other required stuff to the enum class and use where ever required. For example :</p>
<pre width="100%">MySingleton singleton = MySingleton.INSTANCE;
singleton.sayHello();
singleton.sayBye();</pre>
<p>As we see here writing a singleton using enum is very simple and effective without worrying too much on concurrency and other stuff.</p>
</body>
</html>